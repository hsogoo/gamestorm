<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="game_category">

    <select id="game_category.findExsitCategoryIdsByGameId" parameterClass="long" resultClass="long">
        select category_id
        from gs_game_category
        where game_id = #gameId#
        and status = 1
    </select>

    <select id="game_category.findExsitGameIdsByCategoryId" parameterClass="long" resultClass="long">
        select game_id
        from gs_game_category
        where category_id = #categoryId#
        and status = 1
    </select>

    <insert id="game_category.insertGameAndCategoryRelation" parameterClass="map">
        insert into gs_game_category (game_id,category_id,status) VALUES (#gameId#,#categoryId#,1)
    </insert>

    <update id="game_category.updateGameAndCategoryRelationById" parameterClass="map">
        update gs_game_category
        <dynamic prepend="set">
            <isNotNull prepend="," property="gameId">game_id=#gameId#</isNotNull>
            <isNotNull prepend="," property="categoryId">category_id=#categoryId#</isNotNull>
            <isNotNull prepend="," property="status">status=#status#</isNotNull>
        </dynamic>
        where id = #id#
    </update>

</sqlMap>